function updatePreview(e){var t=e.target.id,e=e.target.value,t=document.getElementById("preview-"+t);t&&(t.querySelector("p").innerHTML=e)}function insertTag(e){var t,n,d,a,i=document.querySelector("textarea:focus");i&&(t=i.selectionStart,a=i.selectionEnd,d=(n=i.value).substring(0,t),a=n.substring(a,n.length),i.value=d+e+a,i.selectionStart=i.selectionEnd=t+e.length/2,i.focus(),updatePreview({target:i}))}var inputs=document.querySelectorAll("input, textarea"),uploadedPhoto=(inputs.forEach(function(e){e.addEventListener("input",updatePreview)}),document.querySelector(".btn-bold").addEventListener("click",function(){return insertTag("<b></b>")}),document.querySelector(".btn-strike-through").addEventListener("click",function(){return insertTag("<s></s>")}),document.querySelector(".btn-underline").addEventListener("click",function(){return insertTag("<u></u>")}),document.querySelector(".btn-list").addEventListener("click",function(){return insertTag("<ul><li></li></ul>")}),document.querySelector(".btn-ordered-list").addEventListener("click",function(){return insertTag("<ol><li></li></ol>")}),null);function getParameterByName(e){return new URLSearchParams(window.location.search).get(e)}document.getElementById("photo-upload").addEventListener("change",function(e){var t,e=e.target.files[0];e&&(uploadedPhoto=e,(t=new FileReader).onload=function(e){document.getElementById("preview-photo").innerHTML='<img src="'.concat(e.target.result,'" alt="Photo" style="max-width: 150px; max-height: 150px; margin-bottom: 20px; border-radius: 50%; overflow: hidden;">')},t.readAsDataURL(e))}),document.addEventListener("DOMContentLoaded",function(){var e=localStorage.getItem("selectTemplate");if(e){var t=document.querySelector(".cv-preview");switch(e){case"cv-classic":t.classList.add("cv-classic-style");var n=document.getElementById("preview-first-name"),d=document.getElementById("preview-last-name"),a=document.getElementById("preview-job-title"),i=document.createElement("div"),r=(i.classList.add("personal-info-boxes"),a&&n&&d&&(i.appendChild(a),i.appendChild(n),i.appendChild(d),t.prepend(i)),document.createElement("div")),a=(r.classList.add("personal-data-boxes"),[{id:"preview-email",icon:"fa-envelope"},{id:"preview-phone",icon:"fa-phone"},{id:"preview-city",icon:"fa-city"},{id:"preview-postal-code",icon:"fa-map-marker-alt"}].forEach(function(e){var t,n=document.getElementById(e.id);n&&((t=document.createElement("i")).classList.add("fa",e.icon),n.classList.add("personal-data-box"),n.prepend(t),r.appendChild(n))}),document.getElementById("preview-summary")),n=(a&&a.insertAdjacentElement("afterend",r),document.createElement("div")),o=(n.classList.add("main-box"),document.createElement("div")),c=(o.classList.add("main-box-left"),["preview-summary","preview-education","preview-skills","preview-courses"].forEach(function(e){e=document.getElementById(e);e&&o.appendChild(e)}),n.appendChild(o),document.createElement("div"));c.classList.add("main-box-right");["preview-languages","preview-hobbies"].forEach(function(e){e=document.getElementById(e);e&&c.appendChild(e)}),n.appendChild(c),t.appendChild(n);break;case"cv-modern":t.classList.add("cv-modern-style");var l=document.createElement("div");l.classList.add("photos-section");for(var s=1;s<=4;s++){var m=document.createElement("img");m.src="./dist/img/".concat(s,".png"),m.classList.add("photo-".concat(s)),m.classList.add("photo"),m.alt="ZdjÄ™cie ".concat(s),l.appendChild(m)}t.prepend(l);var d=document.createElement("div"),i=(d.classList.add("personal-info-boxes-modern"),document.getElementById("preview-first-name")),a=document.getElementById("preview-last-name"),n=document.getElementById("preview-job-title"),p=(n&&i&&a&&(d.appendChild(n),d.appendChild(i),d.appendChild(a),t.prepend(d)),document.createElement("div")),n=(p.classList.add("personal-data-boxes-modern"),[{id:"preview-email",icon:"fa-envelope"},{id:"preview-phone",icon:"fa-phone"},{id:"preview-city",icon:"fa-city"},{id:"preview-postal-code",icon:"fa-map-marker-alt"}].forEach(function(e){var t,n=document.getElementById(e.id);n&&((t=document.createElement("i")).classList.add("fa",e.icon),n.classList.add("personal-data-box-modern"),n.prepend(t),p.appendChild(n))}),document.getElementById("preview-summary")),i=(n&&n.insertAdjacentElement("afterend",p),document.createElement("div")),u=(i.classList.add("main-box-modern"),document.createElement("div")),v=(u.classList.add("main-box-left-modern"),["preview-summary","preview-education","preview-skills","preview-courses"].forEach(function(e){e=document.getElementById(e);e&&u.appendChild(e)}),i.appendChild(u),document.createElement("div"));v.classList.add("main-box-right-modern");["preview-languages","preview-hobbies"].forEach(function(e){e=document.getElementById(e);e&&v.appendChild(e)}),i.appendChild(v),t.appendChild(i)}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlY29uZHN0ZXAuanMiXSwibmFtZXMiOlsidXBkYXRlUHJldmlldyIsImV2ZW50IiwiaW5wdXRJZCIsInRhcmdldCIsImlkIiwiaW5wdXRWYWx1ZSIsInZhbHVlIiwiZ2V0RWxlbWVudEJ5SWQiLCJwcmV2aWV3RWxlbWVudCIsImlubmVySFRNTCIsImluc2VydFRhZyIsInRhZyIsInRleHRhcmVhIiwiZW5kIiwidGV4dCIsImJlZm9yZSIsInF1ZXJ5U2VsZWN0b3IiLCJzZWxlY3Rpb25TdGFydCIsInN0YXJ0Iiwic2VsZWN0aW9uRW5kIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwiYWZ0ZXIiLCJmb2N1cyIsImlucHV0cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInVwbG9hZGVkUGhvdG8iLCJmb3JFYWNoIiwiaW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwibmFtZSIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwiZ2V0IiwiVVJMU2VhcmNoUGFyYW1zIiwiZmlsZSIsImZpbGVzIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInByZXZpZXdQaG90byIsInJlc3VsdCIsInJlYWRBc0RhdGFVUkwiLCJzZWxlY3RlZFRlbXBsYXRlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImN2UHJldmlld0VsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImpvYlRpdGxlIiwicGVyc29uYWxJbmZvQm94ZXMiLCJjcmVhdGVFbGVtZW50IiwicGVyc29uYWxEYXRhQm94IiwiYXBwZW5kQ2hpbGQiLCJwcmVwZW5kIiwicHJldmlld1N1bW1hcnkiLCJpY29uIiwic2VjdGlvbiIsImljb25FbGVtZW50Iiwic2VjdGlvbkVsZW1lbnQiLCJtYWluQm94IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwibWFpbkJveExlZnQiLCJtYWluQm94UmlnaHQiLCJzZWN0aW9uc1JpZ2h0IiwicGhvdG9zU2VjdGlvbiIsInBob3RvIiwiY29uY2F0IiwiaSIsImFsdCIsInBlcnNvbmFsSW5mb0JveGVzTW9kZXJuIiwiZmlyc3ROYW1lTW9kZXJuIiwibGFzdE5hbWVNb2Rlcm4iLCJqb2JUaXRsZU1vZGVybiIsInBlcnNvbmFsRGF0YUJveE1vZGVybiIsInByZXZpZXdTdW1tYXJ5TW9kZXJuIiwibWFpbkJveE1vZGVybiIsIm1haW5Cb3hMZWZ0TW9kZXJuIiwibWFpbkJveFJpZ2h0TW9kZXJuIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUFTQSxjQUFjQyxHQUR2QixJQUFBQyxFQUFBRCxFQUFBRSxPQUFBQyxHQUNBQyxFQUFTTCxFQUFjQyxPQUFPSyxNQUN2QkosRUFBZ0JDLFNBQVNJLGVBQUEsV0FBQUwsQ0FBQSxFQUUvQk0sSUFFQUEsRUFBSUEsY0FBZ0IsR0FBQSxFQUFBQyxVQUFBSixFQUdyQixDQUVBLFNBQUFLLFVBQUFDLEdBQ0EsSUFFS0MsRUFFR0MsRUFDQUMsRUFDQUMsRUFOUkgsRUFBa0JGLFNBQU1NLGNBQUEsZ0JBQUEsRUFDdkJKLElBQ0lBLEVBQVVBLEVBQUFLLGVBQ1BDLEVBQUtOLEVBQUdBLGFBRVJFLEdBREFELEVBQU1ELEVBQVNPLE9BQ1JQLFVBQWMsRUFBQU0sQ0FBQSxFQUNyQkgsRUFBTUQsRUFBT00sVUFBVVAsRUFBSUssRUFBTUcsTUFBQSxFQUV2Q1QsRUFETVUsTUFBUVIsRUFBS00sRUFBYUUsRUFFaENWLEVBREFBLGVBQXVCQSxFQUFTVSxhQUFLSixFQUFBUCxFQUFBVSxPQUFBLEVBRXJDVCxFQURBQSxNQUFTSyxFQUVUakIsY0FEU3VCLENBQUtwQixPQUFFUyxDQUFBLENBQUEsRUFHbEIsQ0FBQSxJQUFBWSxPQUFBQyxTQUFBQyxpQkFBQSxpQkFBQSxFQXVCa0VDLGVBbkJsRUgsT0FBT0ksUUFBUSxTQUFDQyxHQUZoQkEsRUFBQUMsaUJBQUEsUUFBQTlCLGFBQUEsQ0FDQSxDQUFBLEVBR0F5QixTQUlFVCxjQUFjLFdBQVcsRUFGM0JjLGlCQUFBLFFBQUEsV0FBQSxPQUFBcEIs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QXhCLEdBRUY0RSxFQUFjdkIsU0FBWXlCLGVBQWtCOUUsQ0FBQyxFQUU3QzRDLEdBcEJFaUMsRUFzQkZ4QixZQUFBTSxDQUFBLENBRUgsQ0FBQSxFQXBCR2lCLEVBQWN2QixZQUFZd0IsQ0FBaUIsRUFFaEJ4RCxTQUFTOEIsY0FBYyxLQUFLLEdBQ3ZEMkIsRUFBbUJqQyxVQUFVQyxJQUFJLHVCQUF1QixFQUU1QixDQUFDLG9CQUFxQixtQkFFOUJ0QixRQUFRLFNBQUN4QixHQUN0QjJELEVBQWlCdEMsU0FBU2xCLGVBQWVILENBQUUsRUFDN0MyRCxHQUNIbUIsRUFBbUJ6QixZQUFZTSxDQUFjLENBRS9DLENBQUMsRUFFRGlCLEVBQWN2QixZQUFZeUIsQ0FBa0IsRUFFNUNsQyxFQUFpQlMsWUFBWXVCLENBQWEsQ0FHNUMsQ0FDRCxDQUNELENBQUMiLCJmaWxlIjoic2Vjb25kc3RlcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBGdW5jdGlvbiB0byB1cGRhdGUgdGhlIENWIHByZXZpZXcgaW4gcmVhbC10aW1lXHJcbmZ1bmN0aW9uIHVwZGF0ZVByZXZpZXcoZXZlbnQpIHtcclxuXHRjb25zdCBpbnB1dElkID0gZXZlbnQudGFyZ2V0LmlkO1xyXG5cdGNvbnN0IGlucHV0VmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XHJcblx0Y29uc3QgcHJldmlld0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlldy0nICsgaW5wdXRJZCk7XHJcblxyXG5cdGlmIChwcmV2aWV3RWxlbWVudCkge1xyXG5cdFx0cHJldmlld0VsZW1lbnQucXVlcnlTZWxlY3RvcigncCcpLmlubmVySFRNTCA9IGlucHV0VmFsdWU7XHJcblx0fVxyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byBpbnNlcnQgSFRNTCB0YWdzIGF0IHRoZSBjdXJzb3IgcG9zaXRpb24gaW4gdGhlIHRleHRhcmVhXHJcbmZ1bmN0aW9uIGluc2VydFRhZyh0YWcpIHtcclxuXHRjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhOmZvY3VzJyk7XHJcblx0aWYgKHRleHRhcmVhKSB7XHJcblx0XHRjb25zdCBzdGFydCA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0O1xyXG5cdFx0Y29uc3QgZW5kID0gdGV4dGFyZWEuc2VsZWN0aW9uRW5kO1xyXG5cdFx0Y29uc3QgdGV4dCA9IHRleHRhcmVhLnZhbHVlO1xyXG5cdFx0Y29uc3QgYmVmb3JlID0gdGV4dC5zdWJzdHJpbmcoMCwgc3RhcnQpO1xyXG5cdFx0Y29uc3QgYWZ0ZXIgPSB0ZXh0LnN1YnN0cmluZyhlbmQsIHRleHQubGVuZ3RoKTtcclxuXHRcdHRleHRhcmVhLnZhbHVlID0gYmVmb3JlICsgdGFnICsgYWZ0ZXI7XHJcblx0XHR0ZXh0YXJlYS5zZWxlY3Rpb25TdGFydCA9IHRleHRhcmVhLnNlbGVjdGlvbkVuZCA9IHN0YXJ0ICsgdGFnLmxlbmd0aCAvIDI7XHJcblx0XHR0ZXh0YXJlYS5mb2N1cygpO1xyXG5cdFx0dXBkYXRlUHJldmlldyh7IHRhcmdldDogdGV4dGFyZWEgfSk7IC8vIFVwZGF0ZSBwcmV2aWV3IGFmdGVyIGluc2VydGluZyB0YWdcclxuXHR9XHJcbn1cclxuXHJcbi8vIEF0dGFjaCBldmVudCBsaXN0ZW5lcnMgdG8gYWxsIGlucHV0IGFuZCB0ZXh0YXJlYSBlbGVtZW50c1xyXG5jb25zdCBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCwgdGV4dGFyZWEnKTtcclxuaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcblx0aW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGVQcmV2aWV3KTtcclxufSk7XHJcblxyXG4vLyBBdHRhY2ggZXZlbnQgbGlzdGVuZXJzIHRvIGZvcm1hdHRpbmcgYnV0dG9uc1xyXG5kb2N1bWVudFxyXG5cdC5xdWVyeVNlbGVjdG9yKCcuYnRuLWJvbGQnKVxyXG5cdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGluc2VydFRhZygnPGI+PC9iPicpKTtcclxuZG9jdW1lbnRcclxuXHQucXVlcnlTZWxlY3RvcignLmJ0bi1zdHJpa2UtdGhyb3VnaCcpXHJcblx0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaW5zZXJ0VGFnKCc8cz48L3M+JykpO1xyXG5kb2N1bWVudFxyXG5cdC5xdWVyeVNlbGVjdG9yKCcuYnRuLXVuZGVybGluZScpXHJcblx0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaW5zZXJ0VGFnKCc8dT48L3U+JykpO1xyXG5kb2N1bWVudFxyXG5cdC5xdWVyeVNlbGVjdG9yKCcuYnRuLWxpc3QnKVxyXG5cdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGluc2VydFRhZygnPHVsPjxsaT48L2xpPjwvdWw+JykpO1xyXG5kb2N1bWVudFxyXG5cdC5xdWVyeVNlbGVjdG9yKCcuYnRuLW9yZGVyZWQtbGlzdCcpXHJcblx0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaW5zZXJ0VGFnKCc8b2w+PGxpPjwvbGk+PC9vbD4nKSk7XHJcblxyXG4vLyBIYW5kbGUgaW1hZ2UgdXBsb2FkXHJcbmxldCB1cGxvYWRlZFBob3RvID0gbnVsbDsgLy8gWm1pZW5uYSBkbyBwcnplY2hvd3l3YW5pYSBwbGlrdSB6ZGrEmWNpYVxyXG5kb2N1bWVudFxyXG5cdC5nZXRFbGVtZW50QnlJZCgncGhvdG8tdXBsb2FkJylcclxuXHQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xyXG5cdFx0aWYgKGZpbGUpIHtcclxuXHRcdFx0dXBsb2FkZWRQaG90byA9IGZpbGU7IC8vIFByemVjaG93YWogcHJ6ZXPFgmFuZSB6ZGrEmWNpZVxyXG5cdFx0XHRjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cdFx0XHRyZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRjb25zdCBwcmV2aWV3UGhvdG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlldy1waG90bycpO1xyXG5cdFx0XHRcdHByZXZpZXdQaG90by5pbm5lckhUTUwgPSBgPGltZyBzcmM9XCIke2UudGFyZ2V0LnJlc3VsdH1cIiBhbHQ9XCJQaG90b1wiIHN0eWxlPVwibWF4LXdpZHRoOiAxNTBweDsgbWF4LWhlaWdodDogMTUwcHg7IG1hcmdpbi1ib3R0b206IDIwcHg7IGJvcmRlci1yYWRpdXM6IDUwJTsgb3ZlcmZsb3c6IGhpZGRlbjtcIj5gO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbi8vIE9uIGRvY3VtZW50IGxvYWQsIGhhbmRsZSBpbWFnZSBVUkwgZm9yIGJhY2tncm91bmRcclxuLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuLy8gXHRkb2N1bWVudFxyXG4vLyBcdFx0LmdldEVsZW1lbnRCeUlkKCdzYXZlLWN2JylcclxuLy8gXHRcdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4vLyBcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuLy8gXHRcdFx0Y29uc29sZS5sb2coJ0tsaWtuacSZY2llIHphcmVqZXN0cm93YW5lIScpO1xyXG5cclxuLy8gXHRcdFx0Y29uc3QgY3ZDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N2LXByZXZpZXcnKS5vdXRlckhUTUw7XHJcbi8vIFx0XHRcdGNvbnNvbGUubG9nKCdQb2JyYW55IEhUTUw6JywgY3ZDb250ZW50KTtcclxuXHJcbi8vIFx0XHRcdGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbi8vIFx0XHRcdGZvcm1EYXRhLmFwcGVuZChcclxuLy8gXHRcdFx0XHQnY3ZDb250ZW50JyxcclxuLy8gXHRcdFx0XHRuZXcgQmxvYihbY3ZDb250ZW50XSwgeyB0eXBlOiAndGV4dC9odG1sJyB9KVxyXG4vLyBcdFx0XHQpO1xyXG4vLyBcdFx0XHRmb3JtRGF0YS5hcHBlbmQoJ3VzZXJJZCcsIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpKTsgLy8gVcW8eXdhaiBgZ2V0SXRlbWAgZG8gcG9icmFuaWEgd2FydG/Fm2NpXHJcblxyXG4vLyBcdFx0XHRpZiAodXBsb2FkZWRQaG90bykge1xyXG4vLyBcdFx0XHRcdGZvcm1EYXRhLmFwcGVuZCgncGhvdG8nLCB1cGxvYWRlZFBob3RvKTsgLy8gRG9kYW5pZSBwcnplc8WCYW5lZ28gemRqxJljaWEgZG8gRm9ybURhdGFcclxuLy8gXHRcdFx0fVxyXG5cclxuLy8gXHRcdFx0Y29uc29sZS5sb2coJ1JvenBvY3p5bmFuaWUgZmV0Y2guLi4nKTtcclxuXHJcbi8vIFx0XHRcdGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL2N2ZmlsZS91cGxvYWRQZGYnLCB7XHJcbi8vIFx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXHJcbi8vIFx0XHRcdFx0Ym9keTogZm9ybURhdGEsXHJcbi8vIFx0XHRcdH0pXHJcbi8vIFx0XHRcdFx0LnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbi8vIFx0XHRcdFx0XHRjb25zb2xlLmxvZygnRmV0Y2ggemFrb8WEY3pvbnkuIFN0YXR1cyBvZHBvd2llZHppOicsIHJlc3BvbnNlLnN0YXR1cyk7XHJcblxyXG4vLyBcdFx0XHRcdFx0aWYgKCFyZXNwb25zZS5vaykge1xyXG4vLyBcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdGZXRjaCBlcnJvcjonLCByZXNwb25zZSk7XHJcbi8vIFx0XHRcdFx0XHRcdHJldHVybiByZXNwb25zZS50ZXh0KCkudGhlbigoZXJyb3JUZXh0KSA9PiB7XHJcbi8vIFx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGVycm9yVGV4dCk7XHJcbi8vIFx0XHRcdFx0XHRcdH0pO1xyXG4vLyBcdFx0XHRcdFx0fVxyXG5cclxuLy8gXHRcdFx0XHRcdHJldHVybiByZXNwb25zZS50ZXh0KCk7IC8vIFBvYmllcnogb2Rwb3dpZWTFuiBqYWtvIHRla3N0XHJcbi8vIFx0XHRcdFx0fSlcclxuLy8gXHRcdFx0XHQudGhlbigodGV4dCkgPT4ge1xyXG4vLyBcdFx0XHRcdFx0Y29uc29sZS5sb2coJ09kcG93aWVkxbogc2Vyd2VyYTonLCB0ZXh0KTtcclxuXHJcbi8vIFx0XHRcdFx0XHQvLyBQYXJzb3dhbmllIG9kcG93aWVkemkgamFrbyBKU09OLCBqZcWbbGkgb2Rwb3dpZWTFuiBqZXN0IHcgZm9ybWFjaWUgSlNPTlxyXG4vLyBcdFx0XHRcdFx0dHJ5IHtcclxuLy8gXHRcdFx0XHRcdFx0Y29uc3QgZGF0YSA9IEpTT04ucGFyc2UodGV4dCk7XHJcblxyXG4vLyBcdFx0XHRcdFx0XHQvLyBTcHJhd2TFuiwgY3p5IG9kcG93aWVkxbogemF3aWVyYSBgY3ZGaWxlSWRgIGkgemFwaXN6IGRvIGBzZXNzaW9uU3RvcmFnZWBcclxuLy8gXHRcdFx0XHRcdFx0aWYgKGRhdGEuY3ZGaWxlSWQpIHtcclxuLy8gXHRcdFx0XHRcdFx0XHRzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdjdkZpbGVJZCcsIGRhdGEuY3ZGaWxlSWQpO1xyXG4vLyBcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdjdkZpbGVJZCB6YXBpc2FueSB3IHNlc3Npb25TdG9yYWdlOicsIGRhdGEuY3ZGaWxlSWQpO1xyXG4vLyBcdFx0XHRcdFx0XHR9XHJcbi8vIFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XHJcbi8vIFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0LFgsSFZCBwYXJzb3dhbmlhIG9kcG93aWVkemk6JywgZSk7XHJcbi8vIFx0XHRcdFx0XHR9XHJcblxyXG4vLyBcdFx0XHRcdFx0YWxlcnQoJ0NWIHNhdmVkIHN1Y2Nlc3NmdWxseSEnKTtcclxuLy8gXHRcdFx0XHRcdC8vIFBvIHphcGlzYW5pdSBDViBuYSBzZXJ3ZXJ6ZSwgcHJ6ZWtpZXJvd2FuaWUgZG8gdHJ6ZWNpZWdvIGtyb2t1XHJcbi8vIFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICd0aGlyZHN0ZXAuaHRtbCc7XHJcbi8vIFx0XHRcdFx0fSlcclxuLy8gXHRcdFx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcbi8vIFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdCxYLEhWQgcG9kY3phcyBwcnpldHdhcnphbmlhIG9kcG93aWVkemk6JywgZXJyb3IpO1xyXG4vLyBcdFx0XHRcdFx0YWxlcnQoJ1d5c3TEhXBpxYIgYsWCxIVkIHBvZGN6YXMgemFwaXN5d2FuaWEgQ1Y6ICcgKyBlcnJvci5tZXNzYWdlKTtcclxuLy8gXHRcdFx0XHR9KTtcclxuLy8gXHRcdH0pO1xyXG4vLyB9KTtcclxuXHJcbmZ1bmN0aW9uIGdldFBhcmFtZXRlckJ5TmFtZShuYW1lKSB7XHJcblx0Y29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuXHRyZXR1cm4gdXJsUGFyYW1zLmdldChuYW1lKTtcclxufVxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG5cdC8vIE9kY3p5dGFqIHd5YnJhbnkgc3phYmxvbiB6IGxvY2FsU3RvcmFnZVxyXG5cdGNvbnN0IHNlbGVjdGVkVGVtcGxhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VsZWN0VGVtcGxhdGUnKTtcclxuXHJcblx0Ly8gWmHFgmFkdWogb2Rwb3dpZWRuaSBwbGlrIENTUyBsdWIgZG9kYWogb2Rwb3dpZWRuacSFIGtsYXPEmSBkbyBlbGVtZW50dSAuY3YtcHJldmlld1xyXG5cdGlmIChzZWxlY3RlZFRlbXBsYXRlKSB7XHJcblx0XHRjb25zdCBjdlByZXZpZXdFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN2LXByZXZpZXcnKTtcclxuXHJcblx0XHRzd2l0Y2ggKHNlbGVjdGVkVGVtcGxhdGUpIHtcclxuXHRcdFx0Y2FzZSAnY3YtY2xhc3NpYyc6XHJcblx0XHRcdFx0Y3ZQcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjdi1jbGFzc2ljLXN0eWxlJyk7XHJcblxyXG5cdFx0XHRcdC8vIFpuYWpkxbogaXN0bmllasSFY2UgZWxlbWVudHlcclxuXHRcdFx0XHRjb25zdCBmaXJzdE5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlldy1maXJzdC1uYW1lJyk7XHJcblx0XHRcdFx0Y29uc3QgbGFzdE5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlldy1sYXN0LW5hbWUnKTtcclxuXHRcdFx0XHRjb25zdCBqb2JUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3LWpvYi10aXRsZScpO1xyXG5cclxuXHRcdFx0XHQvLyBUd29yemVuaWUgcGVyc29uYWwtaW5mby1ib3hlcyBpIHByemVuaWVzaWVuaWUgZG8gbmllZ28gZWxlbWVudMOzd1xyXG5cdFx0XHRcdGNvbnN0IHBlcnNvbmFsSW5mb0JveGVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0cGVyc29uYWxJbmZvQm94ZXMuY2xhc3NMaXN0LmFkZCgncGVyc29uYWwtaW5mby1ib3hlcycpO1xyXG5cclxuXHRcdFx0XHRpZiAoam9iVGl0bGUgJiYgZmlyc3ROYW1lICYmIGxhc3ROYW1lKSB7XHJcblx0XHRcdFx0XHQvLyBQcnplbm9zemVuaWUgZWxlbWVudMOzdyBkbyBwZXJzb25hbC1pbmZvLWJveGVzXHJcblx0XHRcdFx0XHRwZXJzb25hbEluZm9Cb3hlcy5hcHBlbmRDaGlsZChqb2JUaXRsZSk7XHJcblx0XHRcdFx0XHRwZXJzb25hbEluZm9Cb3hlcy5hcHBlbmRDaGlsZChmaXJzdE5hbWUpO1xyXG5cdFx0XHRcdFx0cGVyc29uYWxJbmZvQm94ZXMuYXBwZW5kQ2hpbGQobGFzdE5hbWUpO1xyXG5cclxuXHRcdFx0XHRcdC8vIERvZGFuaWUgcGVyc29uYWwtaW5mby1ib3hlcyBuYSBnw7NyemUgY3YtcHJldmlld1xyXG5cdFx0XHRcdFx0Y3ZQcmV2aWV3RWxlbWVudC5wcmVwZW5kKHBlcnNvbmFsSW5mb0JveGVzKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFR3b3J6ZW5pZSBwZXJzb25hbC1kYXRhLWJveFxyXG5cdFx0XHRcdGNvbnN0IHBlcnNvbmFsRGF0YUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdHBlcnNvbmFsRGF0YUJveC5jbGFzc0xpc3QuYWRkKCdwZXJzb25hbC1kYXRhLWJveGVzJyk7XHJcblxyXG5cdFx0XHRcdC8vIERlZmluaWNqZSBzZWtjamkgeiBpa29uYW1pIEZvbnQgQXdlc29tZSAoYmV6IGltaWVuaWEgaSBuYXp3aXNrYSlcclxuXHRcdFx0XHRjb25zdCBzZWN0aW9ucyA9IFtcclxuXHRcdFx0XHRcdHsgaWQ6ICdwcmV2aWV3LWVtYWlsJywgaWNvbjogJ2ZhLWVudmVsb3BlJyB9LFxyXG5cdFx0XHRcdFx0eyBpZDogJ3ByZXZpZXctcGhvbmUnLCBpY29uOiAnZmEtcGhvbmUnIH0sXHJcblx0XHRcdFx0XHR7IGlkOiAncHJldmlldy1jaXR5JywgaWNvbjogJ2ZhLWNpdHknIH0sXHJcblx0XHRcdFx0XHR7IGlkOiAncHJldmlldy1wb3N0YWwtY29kZScsIGljb246ICdmYS1tYXAtbWFya2VyLWFsdCcgfSxcclxuXHRcdFx0XHRdO1xyXG5cclxuXHRcdFx0XHQvLyBEb2Rhd2FuaWUgc2VrY2ppIGRvIHBlcnNvbmFsRGF0YUJveFxyXG5cdFx0XHRcdHNlY3Rpb25zLmZvckVhY2goKHNlY3Rpb24pID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHNlY3Rpb25FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VjdGlvbi5pZCk7XHJcblx0XHRcdFx0XHRpZiAoc2VjdGlvbkVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcblx0XHRcdFx0XHRcdGljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZhJywgc2VjdGlvbi5pY29uKTtcclxuXHRcdFx0XHRcdFx0c2VjdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncGVyc29uYWwtZGF0YS1ib3gnKTtcclxuXHRcdFx0XHRcdFx0c2VjdGlvbkVsZW1lbnQucHJlcGVuZChpY29uRWxlbWVudCk7XHJcblx0XHRcdFx0XHRcdHBlcnNvbmFsRGF0YUJveC5hcHBlbmRDaGlsZChzZWN0aW9uRWxlbWVudCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vIFVtaWVzemN6ZW5pZSBwZXJzb25hbC1kYXRhLWJveCB6YSBzZWtjasSFIHByZXZpZXctc3VtbWFyeVxyXG5cdFx0XHRcdGNvbnN0IHByZXZpZXdTdW1tYXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXctc3VtbWFyeScpO1xyXG5cdFx0XHRcdGlmIChwcmV2aWV3U3VtbWFyeSkge1xyXG5cdFx0XHRcdFx0cHJldmlld1N1bW1hcnkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIHBlcnNvbmFsRGF0YUJveCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUd29yemVuaWUgbWFpbi1ib3ggaSBwcnplbmllc2llbmllIGRvIG5pZWdvIG1haW4tYm94LWxlZnQgaSBtYWluLWJveC1yaWdodFxyXG5cdFx0XHRcdGNvbnN0IG1haW5Cb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRtYWluQm94LmNsYXNzTGlzdC5hZGQoJ21haW4tYm94Jyk7XHJcblxyXG5cdFx0XHRcdC8vIFR3b3J6ZW5pZSBtYWluLWJveC1sZWZ0IGkgcHJ6ZW5pZXNpZW5pZSBvZHBvd2llZG5pY2ggc2VrY2ppXHJcblx0XHRcdFx0Y29uc3QgbWFpbkJveExlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRtYWluQm94TGVmdC5jbGFzc0xpc3QuYWRkKCdtYWluLWJveC1sZWZ0Jyk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IHNlY3Rpb25zTGVmdCA9IFtcclxuXHRcdFx0XHRcdCdwcmV2aWV3LXN1bW1hcnknLFxyXG5cdFx0XHRcdFx0J3ByZXZpZXctZWR1Y2F0aW9uJyxcclxuXHRcdFx0XHRcdCdwcmV2aWV3LXNraWxscycsXHJcblx0XHRcdFx0XHQncHJldmlldy1jb3Vyc2VzJyxcclxuXHRcdFx0XHRdO1xyXG5cclxuXHRcdFx0XHRzZWN0aW9uc0xlZnQuZm9yRWFjaCgoaWQpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHNlY3Rpb25FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG5cdFx0XHRcdFx0aWYgKHNlY3Rpb25FbGVtZW50KSB7XHJcblx0XHRcdFx0XHRcdG1haW5Cb3hMZWZ0LmFwcGVuZENoaWxkKHNlY3Rpb25FbGVtZW50KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gRG9kYW5pZSBtYWluLWJveC1sZWZ0IGRvIG1haW4tYm94XHJcblx0XHRcdFx0bWFpbkJveC5hcHBlbmRDaGlsZChtYWluQm94TGVmdCk7XHJcblxyXG5cdFx0XHRcdC8vIFR3b3J6ZW5pZSBtYWluLWJveC1yaWdodCBpIHByemVuaWVzaWVuaWUgb2Rwb3dpZWRuaWNoIHNla2NqaVxyXG5cdFx0XHRcdGNvbnN0IG1haW5Cb3hSaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdG1haW5Cb3hSaWdodC5jbGFzc0xpc3QuYWRkKCdtYWluLWJveC1yaWdodCcpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBzZWN0aW9uc1JpZ2h0ID0gWydwcmV2aWV3LWxhbmd1YWdlcycsICdwcmV2aWV3LWhvYmJpZXMnXTtcclxuXHJcblx0XHRcdFx0c2VjdGlvbnNSaWdodC5mb3JFYWNoKChpZCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3Qgc2VjdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcblx0XHRcdFx0XHRpZiAoc2VjdGlvbkVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0bWFpbkJveFJpZ2h0LmFwcGVuZENoaWxkKHNlY3Rpb25FbGVtZW50KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gRG9kYW5pZSBtYWluLWJveC1yaWdodCBkbyBtYWluLWJveFxyXG5cdFx0XHRcdG1haW5Cb3guYXBwZW5kQ2hpbGQobWFpbkJveFJpZ2h0KTtcclxuXHJcblx0XHRcdFx0Ly8gRG9kYW5pZSBtYWluLWJveCBkbyBjdi1wcmV2aWV3XHJcblx0XHRcdFx0Y3ZQcmV2aWV3RWxlbWVudC5hcHBlbmRDaGlsZChtYWluQm94KTtcclxuXHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ2N2LW1vZGVybic6XHJcblx0XHRcdFx0Y3ZQcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjdi1tb2Rlcm4tc3R5bGUnKTtcclxuXHJcblx0XHRcdFx0Ly8gRG9kYWogc2VrY2rEmSBuYSB6ZGrEmWNpYVxyXG5cdFx0XHRcdGNvbnN0IHBob3Rvc1NlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRwaG90b3NTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ3Bob3Rvcy1zZWN0aW9uJyk7XHJcblxyXG5cdFx0XHRcdC8vIFV0d8OzcnogY3p0ZXJ5IGVsZW1lbnR5IGltZyBkbGEgemRqxJnEh1xyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IDQ7IGkrKykge1xyXG5cdFx0XHRcdFx0Y29uc3QgcGhvdG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHRcdFx0XHRcdHBob3RvLnNyYyA9IGAuL2Rpc3QvaW1nLyR7aX0ucG5nYDsgLy8gVXN0YXcgxZtjaWXFvGvEmSBkbyB6ZGrEmcSHXHJcblx0XHRcdFx0XHRwaG90by5jbGFzc0xpc3QuYWRkKGBwaG90by0ke2l9YCk7XHJcblx0XHRcdFx0XHRwaG90by5jbGFzc0xpc3QuYWRkKGBwaG90b2ApO1xyXG5cdFx0XHRcdFx0cGhvdG8uYWx0ID0gYFpkasSZY2llICR7aX1gOyAvLyBEb2RhaiB0ZWtzdCBhbHRlcm5hdHl3bnlcclxuXHRcdFx0XHRcdHBob3Rvc1NlY3Rpb24uYXBwZW5kQ2hpbGQocGhvdG8pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gRG9kYWogc2VrY2rEmSB6ZGrEmcSHIGRvIGN2LXByZXZpZXdcclxuXHRcdFx0XHRjdlByZXZpZXdFbGVtZW50LnByZXBlbmQocGhvdG9zU2VjdGlvbik7XHJcblxyXG5cdFx0XHRcdC8vIERvZGFqIGlubmUgc2VrY2plIGRsYSBjdi1tb2Rlcm5cclxuXHRcdFx0XHRjb25zdCBwZXJzb25hbEluZm9Cb3hlc01vZGVybiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdHBlcnNvbmFsSW5mb0JveGVzTW9kZXJuLmNsYXNzTGlzdC5hZGQoJ3BlcnNvbmFsLWluZm8tYm94ZXMtbW9kZXJuJyk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGZpcnN0TmFtZU1vZGVybiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3LWZpcnN0LW5hbWUnKTtcclxuXHRcdFx0XHRjb25zdCBsYXN0TmFtZU1vZGVybiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3LWxhc3QtbmFtZScpO1xyXG5cdFx0XHRcdGNvbnN0IGpvYlRpdGxlTW9kZXJuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXctam9iLXRpdGxlJyk7XHJcblxyXG5cdFx0XHRcdGlmIChqb2JUaXRsZU1vZGVybiAmJiBmaXJzdE5hbWVNb2Rlcm4gJiYgbGFzdE5hbWVNb2Rlcm4pIHtcclxuXHRcdFx0XHRcdHBlcnNvbmFsSW5mb0JveGVzTW9kZXJuLmFwcGVuZENoaWxkKGpvYlRpdGxlTW9kZXJuKTtcclxuXHRcdFx0XHRcdHBlcnNvbmFsSW5mb0JveGVzTW9kZXJuLmFwcGVuZENoaWxkKGZpcnN0TmFtZU1vZGVybik7XHJcblx0XHRcdFx0XHRwZXJzb25hbEluZm9Cb3hlc01vZGVybi5hcHBlbmRDaGlsZChsYXN0TmFtZU1vZGVybik7XHJcblxyXG5cdFx0XHRcdFx0Y3ZQcmV2aWV3RWxlbWVudC5wcmVwZW5kKHBlcnNvbmFsSW5mb0JveGVzTW9kZXJuKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFR3b3J6ZW5pZSBwZXJzb25hbC1kYXRhLWJveCBkbGEgbW9kZXJuXHJcblx0XHRcdFx0Y29uc3QgcGVyc29uYWxEYXRhQm94TW9kZXJuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0cGVyc29uYWxEYXRhQm94TW9kZXJuLmNsYXNzTGlzdC5hZGQoJ3BlcnNvbmFsLWRhdGEtYm94ZXMtbW9kZXJuJyk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IHNlY3Rpb25zTW9kZXJuID0gW1xyXG5cdFx0XHRcdFx0eyBpZDogJ3ByZXZpZXctZW1haWwnLCBpY29uOiAnZmEtZW52ZWxvcGUnIH0sXHJcblx0XHRcdFx0XHR7IGlkOiAncHJldmlldy1waG9uZScsIGljb246ICdmYS1waG9uZScgfSxcclxuXHRcdFx0XHRcdHsgaWQ6ICdwcmV2aWV3LWNpdHknLCBpY29uOiAnZmEtY2l0eScgfSxcclxuXHRcdFx0XHRcdHsgaWQ6ICdwcmV2aWV3LXBvc3RhbC1jb2RlJywgaWNvbjogJ2ZhLW1hcC1tYXJrZXItYWx0JyB9LFxyXG5cdFx0XHRcdF07XHJcblxyXG5cdFx0XHRcdHNlY3Rpb25zTW9kZXJuLmZvckVhY2goKHNlY3Rpb24pID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHNlY3Rpb25FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VjdGlvbi5pZCk7XHJcblx0XHRcdFx0XHRpZiAoc2VjdGlvbkVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcblx0XHRcdFx0XHRcdGljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZhJywgc2VjdGlvbi5pY29uKTtcclxuXHRcdFx0XHRcdFx0c2VjdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncGVyc29uYWwtZGF0YS1ib3gtbW9kZXJuJyk7XHJcblx0XHRcdFx0XHRcdHNlY3Rpb25FbGVtZW50LnByZXBlbmQoaWNvbkVsZW1lbnQpO1xyXG5cdFx0XHRcdFx0XHRwZXJzb25hbERhdGFCb3hNb2Rlcm4uYXBwZW5kQ2hpbGQoc2VjdGlvbkVsZW1lbnQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRjb25zdCBwcmV2aWV3U3VtbWFyeU1vZGVybiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3LXN1bW1hcnknKTtcclxuXHRcdFx0XHRpZiAocHJldmlld1N1bW1hcnlNb2Rlcm4pIHtcclxuXHRcdFx0XHRcdHByZXZpZXdTdW1tYXJ5TW9kZXJuLmluc2VydEFkamFjZW50RWxlbWVudChcclxuXHRcdFx0XHRcdFx0J2FmdGVyZW5kJyxcclxuXHRcdFx0XHRcdFx0cGVyc29uYWxEYXRhQm94TW9kZXJuXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgbWFpbkJveE1vZGVybiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdG1haW5Cb3hNb2Rlcm4uY2xhc3NMaXN0LmFkZCgnbWFpbi1ib3gtbW9kZXJuJyk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IG1haW5Cb3hMZWZ0TW9kZXJuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0bWFpbkJveExlZnRNb2Rlcm4uY2xhc3NMaXN0LmFkZCgnbWFpbi1ib3gtbGVmdC1tb2Rlcm4nKTtcclxuXHJcblx0XHRcdFx0Y29uc3Qgc2VjdGlvbnNMZWZ0TW9kZXJuID0gW1xyXG5cdFx0XHRcdFx0J3ByZXZpZXctc3VtbWFyeScsXHJcblx0XHRcdFx0XHQncHJldmlldy1lZHVjYXRpb24nLFxyXG5cdFx0XHRcdFx0J3ByZXZpZXctc2tpbGxzJyxcclxuXHRcdFx0XHRcdCdwcmV2aWV3LWNvdXJzZXMnLFxyXG5cdFx0XHRcdF07XHJcblxyXG5cdFx0XHRcdHNlY3Rpb25zTGVmdE1vZGVybi5mb3JFYWNoKChpZCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3Qgc2VjdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcblx0XHRcdFx0XHRpZiAoc2VjdGlvbkVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0bWFpbkJveExlZnRNb2Rlcm4uYXBwZW5kQ2hpbGQoc2VjdGlvbkVsZW1lbnQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRtYWluQm94TW9kZXJuLmFwcGVuZENoaWxkKG1haW5Cb3hMZWZ0TW9kZXJuKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgbWFpbkJveFJpZ2h0TW9kZXJuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0bWFpbkJveFJpZ2h0TW9kZXJuLmNsYXNzTGlzdC5hZGQoJ21haW4tYm94LXJpZ2h0LW1vZGVybicpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBzZWN0aW9uc1JpZ2h0TW9kZXJuID0gWydwcmV2aWV3LWxhbmd1YWdlcycsICdwcmV2aWV3LWhvYmJpZXMnXTtcclxuXHJcblx0XHRcdFx0c2VjdGlvbnNSaWdodE1vZGVybi5mb3JFYWNoKChpZCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3Qgc2VjdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcblx0XHRcdFx0XHRpZiAoc2VjdGlvbkVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0bWFpbkJveFJpZ2h0TW9kZXJuLmFwcGVuZENoaWxkKHNlY3Rpb25FbGVtZW50KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0bWFpbkJveE1vZGVybi5hcHBlbmRDaGlsZChtYWluQm94UmlnaHRNb2Rlcm4pO1xyXG5cclxuXHRcdFx0XHRjdlByZXZpZXdFbGVtZW50LmFwcGVuZENoaWxkKG1haW5Cb3hNb2Rlcm4pO1xyXG5cclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG4iXX0=
