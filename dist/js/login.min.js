document.addEventListener("DOMContentLoaded",function(){console.log("Login form script loaded"),document.getElementById("loginForm").addEventListener("submit",function(e){e.preventDefault(),console.log("Form submit event triggered"),document.querySelector(".error").textContent="",document.querySelector(".success").textContent="";var t=e.target.querySelector('button[type="submit"]'),e=(t.disabled=!0,document.getElementById("username").value),o=document.getElementById("password").value;fetch("http://localhost:8080/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailOrUsername:e,password:o})}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw new Error(e.error||"Unknown error")})}).then(function(e){var t=e.userId,o=e.username,n=e.roleId,t=(sessionStorage.setItem("userId",t),sessionStorage.setItem("userName",o),localStorage.setItem("sessionToken",e.token),localStorage.setItem("roleId",n),console.log("Login successful, setting session data"),(new Date).getTime()+6e5);sessionStorage.setItem("sessionExpiration",t),window.location.href=1!==n&&2===n?"adminpanel.html":"userpanel.html"}).catch(function(e){document.querySelector(".error").textContent="Logowanie nie powiodło się: "+e.message}).finally(function(){t.disabled=!1})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJnZXRFbGVtZW50QnlJZCIsInByZXZlbnREZWZhdWx0IiwiZXZlbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJsb2dpbkJ1dHRvbiIsInVzZXJuYW1lT3JFbWFpbCIsImRhdGEiLCJ0YXJnZXQiLCJlbWFpbE9yVXNlcm5hbWUiLCJ2YWx1ZSIsInBhc3N3b3JkIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwiYm9keSIsIkpTT04iLCJyZXNwb25zZSIsInRoZW4iLCJ1c2VySWQiLCJ1c2VyTmFtZSIsIm9rIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInJvbGVJZCIsImVycm9yIiwic2Vzc2lvblN0b3JhZ2UiLCJzZXNzaW9uRXhwaXJhdGlvbiIsInVzZXJuYW1lIiwibG9jYXRpb24iLCJocmVmIiwidG9rZW4iLCJEYXRlIiwiZ2V0VGltZSIsIndpbmRvdyIsImRpc2FibGVkIiwibWVzc2FnZSJdLCJtYXBwaW5ncyI6IkFBQUFBLFNBQVNDLGlCQUFpQixtQkFBb0IsV0FDN0NDLFFBQVFDLElBQUksMEJBQTBCLEVBRXRDSCxTQUFBQSxlQUNFSSxXQUFlLEVBQ2ZILGlCQUNNSSxTQUFnQixTQUFBQyxHQUF0QkEsRUFFQUosZUFBWSxFQUFaQSxRQUdBRixJQUFTTyw2QkFBMEJDLEVBRG5DUixTQUlBUyxjQUFvQixRQUFPLEVBQUFELFlBQUEsR0FIM0JSLFNBS01VLGNBQWtCVixVQUFTSSxFQUFBQSxZQUFlLEdBSGhELElBTU1PLEVBQU9MLEVBQUFNLE9BQUFMLGNBQUEsdUJBQUEsRUFHWkcsR0FSREQsRUFNQ0ksU0FBaUJILENBQUFBLEVBRWpCVixTQUFBSSxlQUFBLFVBQUEsRUFBQVUsT0FFSUMsRUFBQ2YsU0FBQUksZUFBQSxVQUF5QyxFQUFBVSxNQUEvQ0UsTUFRRSx3Q0FBa0IsQ0FQbkJDLE9BUUUsT0FQRkMsUUFRRyxDQVBGQyxlQVFHLGtCQVBKLEVBQ0FDLEtBUUNDLEtBQU9DLFVBWEMsQ0FOVFQsZ0JBT0NILEVBTkRLLFNBT0NBLENBTkYsQ0Fld0IsQ0FQeEIsQ0FRQyxFQVBDUSxLQVNNQyxTQUFBQSxHQVJOLE9BU01DLEVBQVFDLEdBTWRDLEVBQWFDLEtBQU8sRUFMZEMsRUFBU2xCLEtBQUtrQixFQUFBQSxLQUFNLFNBQUFDLEdBRTFCQyxNQUFBQSxJQUFBQSxNQUFlSCxFQUFRRSxPQUFRLGVBQVMsQ0FDeENDLENBQUFBLENBUEQsQ0FBQyxFQUNBUixLQVdNUyxTQUFBQSxHQVZOLElBV0FELEVBQWNwQixFQUFDaUIsT0FWVEgsRUFBV2QsRUFBS3NCLFNBWXRCSixFQUFBbEIsRUFBQWtCLE9BUUFHLEdBakJBRCxlQVdRRyxRQUFhLFNBQUdWLENBQUEsRUFWeEJPLGVBV1dGLFFBQVcsV0FBR0osQ0FBQSxFQVZ6QkUsYUFXUU8sUUFBU0MsZUFBT3hCLEVBQUF5QixLQUFtQixFQVYzQ1QsYUFXT0MsUUFBQSxTQUFBQyxDQUFBLEVBVlAzQixRQVdDQyxJQUFBLHdDQUFBLEdBRUQsSUFBQWtDLE1BQUFDLFFBQUEsRUFBQSxLQUNBUCxlQUNNSCxRQUFDRSxvQkFBVUUsQ0FBQSxFQU1oQk8sT0FBQUwsU0FBQUMsS0FEV0ssSUFBWi9CLEdBRUQsSUFBQW9CLEVBQ0Ysa0JBWDJCLGdCQUV6QixDQUFDLEVBQUMsTUFDSyxTQUFDQyxHQUNQOUIsU0FBU08sY0FBYyxRQUFRLEVBQUVDLFlBQ2hDLCtCQUFpQ3NCLEVBQU1XLE9BQ3pDLENBQUMsRUFBQyxRQUNPLFdBQ1JoQyxFQUFZK0IsU0FBVyxDQUFBLENBQ3hCLENBQUMsQ0FDSCxDQUFDLENBQ0gsQ0FBQyIsImZpbGUiOiJsb2dpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG5cdGNvbnNvbGUubG9nKCdMb2dpbiBmb3JtIHNjcmlwdCBsb2FkZWQnKTtcclxuXHJcblx0ZG9jdW1lbnRcclxuXHRcdC5nZXRFbGVtZW50QnlJZCgnbG9naW5Gb3JtJylcclxuXHRcdC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdGNvbnNvbGUubG9nKCdGb3JtIHN1Ym1pdCBldmVudCB0cmlnZ2VyZWQnKTtcclxuXHJcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvcicpLnRleHRDb250ZW50ID0gJyc7XHJcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWNjZXNzJykudGV4dENvbnRlbnQgPSAnJztcclxuXHJcblx0XHRcdGNvbnN0IGxvZ2luQnV0dG9uID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XHJcblx0XHRcdGxvZ2luQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdGNvbnN0IHVzZXJuYW1lT3JFbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZScpLnZhbHVlO1xyXG5cdFx0XHRjb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLnZhbHVlO1xyXG5cclxuXHRcdFx0Y29uc3QgZGF0YSA9IHtcclxuXHRcdFx0XHRlbWFpbE9yVXNlcm5hbWU6IHVzZXJuYW1lT3JFbWFpbCxcclxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmQsXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS91c2Vycy9sb2dpbicsIHtcclxuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcblx0XHRcdH0pXHJcblx0XHRcdFx0LnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAoIXJlc3BvbnNlLm9rKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbigoZXJyb3IpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZXJyb3IuZXJyb3IgfHwgJ1Vua25vd24gZXJyb3InKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnRoZW4oKGRhdGEpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHVzZXJJZCA9IGRhdGEudXNlcklkO1xyXG5cdFx0XHRcdFx0Y29uc3QgdXNlck5hbWUgPSBkYXRhLnVzZXJuYW1lO1xyXG5cdFx0XHRcdFx0Y29uc3Qgcm9sZUlkID0gZGF0YS5yb2xlSWQ7XHJcblxyXG5cdFx0XHRcdFx0c2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgdXNlcklkKTtcclxuXHRcdFx0XHRcdHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXJOYW1lJywgdXNlck5hbWUpO1xyXG5cdFx0XHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Nlc3Npb25Ub2tlbicsIGRhdGEudG9rZW4pO1xyXG5cdFx0XHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JvbGVJZCcsIHJvbGVJZCk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnTG9naW4gc3VjY2Vzc2Z1bCwgc2V0dGluZyBzZXNzaW9uIGRhdGEnKTtcclxuXHJcblx0XHRcdFx0XHRjb25zdCBzZXNzaW9uRXhwaXJhdGlvbiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgMTAwMCAqIDYwICogMTA7XHJcblx0XHRcdFx0XHRzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdzZXNzaW9uRXhwaXJhdGlvbicsIHNlc3Npb25FeHBpcmF0aW9uKTtcclxuXHJcblx0XHRcdFx0XHQvLyBQcnpla2llcm93YW5pZSBuYSBwb2RzdGF3aWUgdXNlcklkXHJcblx0XHRcdFx0XHRpZiAocm9sZUlkID09PSAxKSB7XHJcblx0XHRcdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ3VzZXJwYW5lbC5odG1sJzsgLy8gVcW8eXRrb3duaWtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAocm9sZUlkID09PSAyKSB7XHJcblx0XHRcdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2FkbWlucGFuZWwuaHRtbCc7IC8vIEFkbWluaXN0cmF0b3JcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdC8vIE9wY2pvbmFsbmllLCBtb8W8ZXN6IGRvZGHEhyBvYnPFgnVnxJkgaW5ueWNoIHLDs2xcclxuXHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSAndXNlcnBhbmVsLmh0bWwnOyAvLyBEb215xZtsbmllIGRsYSBpbm55Y2ggdcW8eXRrb3duaWvDs3dcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvcicpLnRleHRDb250ZW50ID1cclxuXHRcdFx0XHRcdFx0J0xvZ293YW5pZSBuaWUgcG93aW9kxYJvIHNpxJk6ICcgKyBlcnJvci5tZXNzYWdlO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmZpbmFsbHkoKCkgPT4ge1xyXG5cdFx0XHRcdFx0bG9naW5CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG59KTtcclxuIl19
