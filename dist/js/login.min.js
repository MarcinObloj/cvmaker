document.addEventListener("DOMContentLoaded",function(){console.log("Login form script loaded"),document.getElementById("loginForm").addEventListener("submit",function(e){e.preventDefault(),console.log("Form submit event triggered"),document.querySelector(".error").textContent="",document.querySelector(".success").textContent="";var t=e.target.querySelector('button[type="submit"]'),n=(t.disabled=!0,document.getElementById("username").value),e=document.getElementById("password").value;fetch("http://localhost:8080/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailOrUsername:n,password:e})}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw new Error(e.message)})}).then(function(e){console.log("Login successful, setting session token"),localStorage.setItem("sessionToken",e.token);e=n.includes("@")?n.split("@")[0]:n,sessionStorage.setItem("userName",e),e=(new Date).getTime()+1e6;sessionStorage.setItem("sessionExpiration",e),window.location.href="userpanel.html"}).catch(function(e){document.querySelector(".error").textContent="Logowanie nie powiodło się: "+e.message}).finally(function(){t.disabled=!1})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwibG9naW5CdXR0b24iLCJ0YXJnZXQiLCJwYXNzd29yZCIsImRpc2FibGVkIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsImZldGNoIiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsIkNvbnRlbnQtVHlwZSIsInJlc3BvbnNlIiwiYm9keSIsImVtYWlsT3JVc2VybmFtZSIsInVzZXJuYW1lT3JFbWFpbCIsInRoZW4iLCJvayIsImpzb24iLCJlcnJvciIsIkVycm9yIiwibWVzc2FnZSIsInVzZXJOYW1lIiwic2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwibG9jYWxTdG9yYWdlIiwiZGF0YSIsInRva2VuIiwiaW5jbHVkZXMiLCJzZXNzaW9uRXhwaXJhdGlvbiIsInNwbGl0IiwiRGF0ZSIsImdldFRpbWUiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiXSwibWFwcGluZ3MiOiJBQUFBQSxTQUFTQyxpQkFBaUIsbUJBQW9CLFdBQzFDQyxRQUFRQyxJQUFJLDBCQUEwQixFQUQxQ0gsU0FBU0MsZUFBaUIsV0FBQSxFQUFBQSxpQkFBZ0MsU0FBQSxTQUFBRyxHQUN0REYsRUFBWUcsZUFBQSxFQUVSRCxRQUFNQyxJQUFBQSw2QkFBZ0IsRUFJdEJMLFNBQUFNLGNBQUEsUUFBQSxFQUFBQyxZQUFBLEdBQ0FQLFNBQVNNLGNBQWMsVUFBVUMsRUFBQUEsWUFBZ0IsR0FHM0NDLElBQUFBLEVBQW9CQyxFQUFNQSxPQUFDSCxjQUFjLHVCQUF3QixFQUlqRUksR0FITkYsRUFBWUcsU0FBZSxDQUFBLEVBR0RDLFNBQUFBLGVBQTJCQyxVQUFLLEVBQUFBLE9BRWhESCxFQUFHVixTQUFBWSxlQUFBLFVBQUEsRUFBQUMsTUFRTEMsTUFBQSx3Q0FBZ0IsQ0FDbkJDLE9BQUEsT0FDS0MsUUFBS0MsQ0FFVEMsZUFBYyxrQkFDWEMsRUFDREMsS0FBT0QsS0FBUUYsVUFaVFAsQ0FDYlcsZ0JBQUFDLEVBRUtaLFNBQUFBLENBQ0ZLLENBUWdDLENBSHBDLENBQUMsRUFLUVEsS0FBQyxTQUFBSixHQUNOLE9BQUFBLEVBQUFLLEdBQ09MLEVBQVNNLEtBQUssRUFBTEEsRUFBTUEsS0FBQSxFQUFBRixLQUFBLFNBQUFHLEdBRXBCLE1BQUssSUFBS0MsTUFBQUQsRUFBQUUsT0FBQSxDQUNKekIsQ0FBRyxDQUdYLENBQUEsRUFDQW9CLEtBQU1NLFNBQUFBLEdBQ05DLFFBQWMzQixJQUFDNEIseUNBQTZCLEVBSjVDQyxhQUFhRCxRQUFRLGVBQWdCRSxFQUFLQyxLQUFLLEVBUS9DSixFQUF1QlIsRUFBQWEsU0FBcUJDLEdBQUFBLEVBQUFBLEVBQWtCQyxNQUFBLEdBQUEsRUFBQSxHQUFBZixFQUo5RFEsZUFBZUMsUUFBUSxXQUFZRixDQUFRLEVBU3hDTyxHQUFXLElBQUFFLE1BQUFDLFFBQUEsRUFBQSxJQUNkdkMsZUFBU00sUUFBYyxvQkFBd0I4QixDQUFBLEVBSWpESSxPQUFBQyxTQUFBQyxLQUFBLGdCQUNKLENBQUEsRUFBQSxNQUNKLFNBQUFoQixHQU5VMUIsU0FBU00sY0FBYyxRQUFRLEVBQUVDLFlBQWMsK0JBQWlDbUIsRUFBTUUsT0FDMUYsQ0FBQyxFQUFDLFFBQ08sV0FDTHBCLEVBQVlHLFNBQVcsQ0FBQSxDQUMzQixDQUFDLENBQ0wsQ0FBQyxDQUNMLENBQUMiLCJmaWxlIjoibG9naW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdMb2dpbiBmb3JtIHNjcmlwdCBsb2FkZWQnKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkZvcm0nKS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnRm9ybSBzdWJtaXQgZXZlbnQgdHJpZ2dlcmVkJyk7XHJcblxyXG4gICAgICAgIC8vIFJlc2V0b3dhbmllIHdpYWRvbW/Fm2NpXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVycm9yJykudGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VjY2VzcycpLnRleHRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvZ2luQnV0dG9uID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XHJcbiAgICAgICAgbG9naW5CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBjb25zdCB1c2VybmFtZU9yRW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWUnKS52YWx1ZTtcclxuICAgICAgICBjb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLnZhbHVlO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgICBlbWFpbE9yVXNlcm5hbWU6IHVzZXJuYW1lT3JFbWFpbCxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3VzZXJzL2xvZ2luJywge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKS50aGVuKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTG9naW4gc3VjY2Vzc2Z1bCwgc2V0dGluZyBzZXNzaW9uIHRva2VuJyk7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZXNzaW9uVG9rZW4nLCBkYXRhLnRva2VuKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFByemVjaG93eXdhbmllIG5hend5IHXFvHl0a293bmlrYSB3IHNlc3Npb25TdG9yYWdlXHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJOYW1lID0gdXNlcm5hbWVPckVtYWlsLmluY2x1ZGVzKCdAJykgPyB1c2VybmFtZU9yRW1haWwuc3BsaXQoJ0AnKVswXSA6IHVzZXJuYW1lT3JFbWFpbDtcclxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlck5hbWUnLCB1c2VyTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBVc3Rhd2llbmllIHd5Z2HFm25pxJljaWEgc2VzamkgbmEgMTAgc2VrdW5kIG9kIHRlcmF6XHJcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25FeHBpcmF0aW9uID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAxMDAwMDAwOyAvLyAxMCBzZWt1bmRcclxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnc2Vzc2lvbkV4cGlyYXRpb24nLCBzZXNzaW9uRXhwaXJhdGlvbik7XHJcblxyXG4gICAgICAgICAgICAvLyBQcnpla2llcm93YW5pZSBuYSB1c2VycGFuZWwuaHRtbFxyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICd1c2VycGFuZWwuaHRtbCc7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvcicpLnRleHRDb250ZW50ID0gJ0xvZ293YW5pZSBuaWUgcG93aW9kxYJvIHNpxJk6ICcgKyBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBsb2dpbkJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlOyAvLyBQb25vd25lIHfFgsSFY3plbmllIHByenljaXNrdSBwbyB6YWtvxYRjemVuaXUgxbzEhWRhbmlhXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcbiJdfQ==
