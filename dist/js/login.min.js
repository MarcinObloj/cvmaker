document.addEventListener("DOMContentLoaded",function(){console.log("Login form script loaded"),document.getElementById("loginForm").addEventListener("submit",function(e){e.preventDefault(),console.log("Form submit event triggered"),document.querySelector(".error").textContent="",document.querySelector(".success").textContent="";var t=e.target.querySelector('button[type="submit"]'),e=(t.disabled=!0,document.getElementById("username").value),o=document.getElementById("password").value;fetch("http://localhost:8080/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailOrUsername:e,password:o})}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw new Error(e.error||"Unknown error")})}).then(function(e){var t=e.userId,o=e.username,t=(sessionStorage.setItem("userId",t),sessionStorage.setItem("userName",o),localStorage.setItem("sessionToken",e.token),console.log("Login successful, setting session data"),(new Date).getTime()+6e5);sessionStorage.setItem("sessionExpiration",t),window.location.href="userpanel.html"}).catch(function(e){document.querySelector(".error").textContent="Logowanie nie powiodło się: "+e.message}).finally(function(){t.disabled=!1})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJnZXRFbGVtZW50QnlJZCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJsb2dpbkJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJkaXNhYmxlZCIsInRleHRDb250ZW50IiwicGFzc3dvcmQiLCJ2YWx1ZSIsImZldGNoIiwicmVzcG9uc2UiLCJqc29uIiwiRXJyb3IiLCJlcnJvciIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZW1haWxPclVzZXJuYW1lIiwidXNlcm5hbWVPckVtYWlsIiwidGhlbiIsImRhdGEiLCJvayIsInNldEl0ZW0iLCJ1c2VySWQiLCJ1c2VybmFtZSIsInNlc3Npb25TdG9yYWdlIiwidXNlck5hbWUiLCJzZXNzaW9uRXhwaXJhdGlvbiIsIkRhdGUiLCJnZXRUaW1lIiwibG9jYXRpb24iLCJ0b2tlbiIsIndpbmRvdyIsImhyZWYiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiQUFBQUEsU0FBU0MsaUJBQWlCLG1CQUFvQixXQUMxQ0MsUUFBUUMsSUFBSSwwQkFBMEIsRUFBdENELFNBRUFGLGVBQ0tJLFdBQWUsRUFFUEgsaUJBQWlCLFNBQUEsU0FBQUksR0FFZEYsRUFBSUcsZUFBQSxFQUVaSixRQUFBQyxJQUFBLDZCQUFBLEVBSU1JLFNBQVdDLGNBQWdCQSxRQUFBQSxFQUFBQSxZQUFjLEdBQy9DRCxTQUFZRSxjQUFlLFVBQUEsRUFBQUMsWUFBQSxHQUdyQkMsSUFBUUosRUFBWUgsRUFBQUEsT0FBZUksY0FBWUksdUJBQUssRUFJNUNELEdBRkpKLEVBQUdFLFNBQUEsQ0FBQSxFQUVDRSxTQUFBQSxlQUFBQSxVQUFBQSxFQUFBQSxPQUNiQSxFQUFBWCxTQUFBSSxlQUFBLFVBQUEsRUFBQVEsTUFTU0MsTUFBQSx3Q0FBYyxDQUNYQyxPQUFhLE9BQ1BBLFFBQVNDLENBQ0ZDLGVBQVlDLGtCQUN4QixFQUNOQyxLQUFBQyxLQUFBQyxVQVhVLENBQ0xDLGdCQUFBQyxFQUNMWCxTQUFnQkEsQ0FDbkIsQ0FRRyxDQUNBLENBQU9HLEVBRUxTLEtBQUNDLFNBQUFBLEdBQ0gsT0FBQVYsRUFBQVcsR0FLZUMsRUFBUVgsS0FBVVksRUFKUGIsRUFBQUMsS0FBQSxFQUFBUSxLQUFBLFNBQUFOLEdBQ0pXLE1BQVEsSUFBQVosTUFBQUMsRUFBQUEsT0FBQSxlQUFBLENBUDFCLENBQUMsQ0FXTFksQ0FBQUEsRUFQSE4sS0FBSyxTQUFDQyxHQVVVRSxJQUFPQyxFQUFDSCxFQUFBRyxPQUVURyxFQUFBTixFQUFBSSxTQWVkRyxHQVpRQSxlQUF3QkMsUUFBT0MsU0FBYU4sQ0FBSSxFQUN4Q0UsZUFBU0gsUUFBQSxXQUFxQkssQ0FBQUEsRUFHckNHLGFBQWdCUixRQUFBLGVBQWdCRixFQUFBVyxLQUFBLEVBRzlCM0IsUUFBYUwsSUFBQyx3Q0FDbkIsR0FJTixJQUFBNkIsTUFBQUMsUUFBQSxFQUFBLEtBQ1JKLGVBQUFILFFBQUEsb0JBQUFLLENBQUEsRUFUVUssT0FBT0YsU0FBU0csS0FBTyxnQkFDM0IsQ0FBQyxFQUFDLE1BQ0ssU0FBQ3BCLEdBQ0pqQixTQUFTUSxjQUFjLFFBQVEsRUFBRUUsWUFDN0IsK0JBQWlDTyxFQUFNcUIsT0FDL0MsQ0FBQyxFQUFDLFFBQ08sV0FDTC9CLEVBQVlFLFNBQVcsQ0FBQSxDQUMzQixDQUFDLENBQ1QsQ0FBQyxDQUNULENBQUMiLCJmaWxlIjoibG9naW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdMb2dpbiBmb3JtIHNjcmlwdCBsb2FkZWQnKTtcclxuXHJcbiAgICBkb2N1bWVudFxyXG4gICAgICAgIC5nZXRFbGVtZW50QnlJZCgnbG9naW5Gb3JtJylcclxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRm9ybSBzdWJtaXQgZXZlbnQgdHJpZ2dlcmVkJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZXNldG93YW5pZSB3aWFkb21vxZtjaVxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXJyb3InKS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VjY2VzcycpLnRleHRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9IGV2ZW50LnRhcmdldC5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xyXG4gICAgICAgICAgICBsb2dpbkJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1c2VybmFtZU9yRW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWUnKS52YWx1ZTtcclxuICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQnKS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBlbWFpbE9yVXNlcm5hbWU6IHVzZXJuYW1lT3JFbWFpbCxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3VzZXJzL2xvZ2luJywge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKS50aGVuKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLmVycm9yIHx8ICdVbmtub3duIGVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gWmFrxYJhZGFqxIVjLCDFvGUgYGRhdGFgIHphd2llcmEgYHVzZXJJZGAgaSBgdXNlcm5hbWVgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlcklkID0gZGF0YS51c2VySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlck5hbWUgPSBkYXRhLnVzZXJuYW1lO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBQcnplY2hvd3l3YW5pZSBkYW55Y2ggdyBzZXNzaW9uU3RvcmFnZVxyXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIHVzZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlck5hbWUnLCB1c2VyTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFByemVjaG93eXdhbmllIHRva2VudSB3IGxvY2FsU3RvcmFnZVxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZXNzaW9uVG9rZW4nLCBkYXRhLnRva2VuKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0xvZ2luIHN1Y2Nlc3NmdWwsIHNldHRpbmcgc2Vzc2lvbiBkYXRhJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzdGF3aWVuaWUgd3lnYcWbbmnEmWNpYSBzZXNqaSAobnAuIG5hIDEwIG1pbnV0KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb25FeHBpcmF0aW9uID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAoMTAwMCAqIDYwICogMTApOyAvLyAxMCBtaW51dFxyXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3Nlc3Npb25FeHBpcmF0aW9uJywgc2Vzc2lvbkV4cGlyYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBQcnpla2llcm93YW5pZSBuYSB1c2VycGFuZWwuaHRtbFxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ3VzZXJwYW5lbC5odG1sJztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVycm9yJykudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnTG9nb3dhbmllIG5pZSBwb3dpb2TFgm8gc2nEmTogJyArIGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7IC8vIFBvbm93bmUgd8WCxIVjemVuaWUgcHJ6eWNpc2t1IHBvIHpha2/FhGN6ZW5pdSDFvMSFZGFuaWFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG59KTtcclxuIl19
