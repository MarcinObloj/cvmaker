document.addEventListener("DOMContentLoaded",function(){console.log("Login form script loaded"),document.getElementById("loginForm").addEventListener("submit",function(e){e.preventDefault(),console.log("Form submit event triggered"),document.querySelector(".error").textContent="",document.querySelector(".success").textContent="";var t=e.target.querySelector('button[type="submit"]'),e=(t.disabled=!0,document.getElementById("username").value),o=document.getElementById("password").value;fetch("http://localhost:8080/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailOrUsername:e,password:o})}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw new Error(e.error||"Unknown error")})}).then(function(e){var t=e.userId,o=e.username,t=(sessionStorage.setItem("userId",t),sessionStorage.setItem("userName",o),localStorage.setItem("sessionToken",e.token),console.log("Login successful, setting session data"),(new Date).getTime()+6e5);sessionStorage.setItem("sessionExpiration",t),window.location.href="userpanel.html"}).catch(function(e){document.querySelector(".error").textContent="Logowanie nie powiodło się: "+e.message}).finally(function(){t.disabled=!1})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJnZXRFbGVtZW50QnlJZCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJxdWVyeVNlbGVjdG9yIiwidXNlcm5hbWVPckVtYWlsIiwicGFzc3dvcmQiLCJ0ZXh0Q29udGVudCIsImVtYWlsT3JVc2VybmFtZSIsInRhcmdldCIsInZhbHVlIiwiZmV0Y2giLCJyZXNwb25zZSIsIm1ldGhvZCIsIkVycm9yIiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsImJvZHkiLCJkYXRhIiwic3RyaW5naWZ5IiwidXNlcklkIiwidXNlck5hbWUiLCJzZXRJdGVtIiwib2siLCJqc29uIiwiZXJyb3IiLCJ0b2tlbiIsImxvY2F0aW9uIiwidGhlbiIsInVzZXJuYW1lIiwic2Vzc2lvbkV4cGlyYXRpb24iLCJzZXNzaW9uU3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsIkRhdGUiLCJnZXRUaW1lIiwid2luZG93IiwiaHJlZiIsIm1lc3NhZ2UiLCJsb2dpbkJ1dHRvbiIsImRpc2FibGVkIl0sIm1hcHBpbmdzIjoiQUFBQUEsU0FBU0MsaUJBQWlCLG1CQUFvQixXQUMxQ0MsUUFBUUMsSUFBSSwwQkFBMEIsRUFBdENELFNBRUFGLGVBQ0tJLFdBQWUsRUFFUEgsaUJBQWlCLFNBQUEsU0FBQUksR0FFZEYsRUFBSUcsZUFBQSxFQUlKSixRQUFDSyxJQUFBQSw2QkFBd0MsRUFLM0NDLFNBQUFBLGNBQTJCSixRQUFBQSxFQUFBQSxZQUFlLEdBQzFDSyxTQUFXVCxjQUFTSSxVQUFlLEVBQUFNLFlBQWlCLEdBR3REQyxJQUFBQSxFQUFpQkgsRUFBZUksT0FBQUwsY0FBQSx1QkFBQSxFQUk5QkMsR0FIRkMsRUFBVUEsU0FBQUEsQ0FBQUEsRUFHUlQsU0FBQUksZUFBeUMsVUFBQSxFQUFBUyxPQUNuQ0osRUFBTVQsU0FBQUksZUFBQSxVQUFBLEVBQUFTLE1BUU5DLE1BQU9DLHdDQUFnQyxDQUM3QkMsT0FBSUMsT0FDWkMsUUFBQSxDQUNOQyxlQUFBLGtCQUNPSixFQUVMSyxLQUFDQyxLQUFJQyxVQVpTLENBQ25CWCxnQkFBQUgsRUFDU0MsU0FBVUEsQ0FFZCxDQVFVLENBRU5jLENBQUFBLEVBQ0FDLEtBQVdILFNBQUFBLEdBR0gsT0FBQ0ksRUFBUUMsR0FVUkQsRUFBUUUsS0FBQSxFQVRBWixFQUFVWSxLQUFFSCxFQUFBQSxLQUFTLFNBQUFJLEdBR3ZCLE1BQUEsSUFBQVgsTUFBZ0JJLEVBQUtRLE9BQU0sZUFBQSxDQUVwQyxDQUFBLENBT0xDLENBQUFBLEVBRUpDLEtBQUEsU0FBQVYsR0FJRSxJQUFBRSxFQUFNRixFQUFBRSxPQUNTQyxFQUFRSCxFQUFBVyxTQVh0QkMsR0FjeEJDLGVBQUFULFFBQUEsU0FBQUYsQ0FBQSxFQXRCa0JXLGVBQWVULFFBQVEsV0FBWUQsQ0FBUSxFQUczQ1csYUFBYVYsUUFBUSxlQUFnQkosRUFBS1EsS0FBSyxFQUUvQzNCLFFBQVFDLElBQUksd0NBQXdDLEdBRzFCLElBQUlpQyxNQUFPQyxRQUFRLEVBQUssS0FDbERILGVBQWVULFFBQVEsb0JBQXFCUSxDQUFpQixFQUc3REssT0FBT1IsU0FBU1MsS0FBTyxnQkFDM0IsQ0FBQyxFQUFDLE1BQ0ssU0FBQ1gsR0FDSjVCLFNBQVNPLGNBQWMsUUFBUSxFQUFFRyxZQUM3QiwrQkFBaUNrQixFQUFNWSxPQUMvQyxDQUFDLEVBQUMsUUFDTyxXQUNMQyxFQUFZQyxTQUFXLENBQUEsQ0FDM0IsQ0FBQyxDQUNULENBQUMsQ0FDVCxDQUFDIiwiZmlsZSI6ImxvZ2luLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnTG9naW4gZm9ybSBzY3JpcHQgbG9hZGVkJyk7XHJcblxyXG4gICAgZG9jdW1lbnRcclxuICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luRm9ybScpXHJcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Zvcm0gc3VibWl0IGV2ZW50IHRyaWdnZXJlZCcpO1xyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvcicpLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWNjZXNzJykudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxvZ2luQnV0dG9uID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XHJcbiAgICAgICAgICAgIGxvZ2luQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lT3JFbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZScpLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsT3JVc2VybmFtZTogdXNlcm5hbWVPckVtYWlsLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvdXNlcnMvbG9naW4nLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpLnRoZW4oKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IuZXJyb3IgfHwgJ1Vua25vd24gZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlcklkID0gZGF0YS51c2VySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlck5hbWUgPSBkYXRhLnVzZXJuYW1lO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd1c2VySWQnLCB1c2VySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXJOYW1lJywgdXNlck5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2Vzc2lvblRva2VuJywgZGF0YS50b2tlbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2dpbiBzdWNjZXNzZnVsLCBzZXR0aW5nIHNlc3Npb24gZGF0YScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uRXhwaXJhdGlvbiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgKDEwMDAgKiA2MCAqIDEwKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnc2Vzc2lvbkV4cGlyYXRpb24nLCBzZXNzaW9uRXhwaXJhdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ3VzZXJwYW5lbC5odG1sJztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVycm9yJykudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnTG9nb3dhbmllIG5pZSBwb3dpb2TFgm8gc2nEmTogJyArIGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7IFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbn0pO1xyXG4iXX0=
